#
# Copyright (c) 1994, The University of Utah and
# the Computer Systems Laboratory at the University of Utah (CSL).
#
# Permission to use, copy, modify and distribute this software is hereby
# granted provided that (1) source code retains these copyright, permission,
# and disclaimer notices, and (2) redistributions including binaries
# reproduce the notices in supporting documentation, and (3) all advertising
# materials mentioning features or use of this software display the following
# acknowledgement: ``This product includes software developed by the Computer
# Systems Laboratory at the University of Utah.''
#
# THE UNIVERSITY OF UTAH AND CSL ALLOW FREE USE OF THIS SOFTWARE IN ITS "AS
# IS" CONDITION.  THE UNIVERSITY OF UTAH AND CSL DISCLAIM ANY LIABILITY OF
# ANY KIND FOR ANY DAMAGES WHATSOEVER RESULTING FROM THE USE OF THIS SOFTWARE.
#
# CSL requests users of this software to return to csl-dist@cs.utah.edu any
# improvements that they make and grant CSL redistribution rights.
#
#      Author: Bryan Ford, University of Utah CSS
#
# HISTORY
# $Log: Makefile.in,v $
# Revision 1.2  2000/10/27 02:06:56  welchd
#
# Some missing files
#
# Revision 1.1.1.1  1995/03/02  21:49:25  mike
# Initial Lites release from hut.fi
#
#

#### Start of configuration section ####

SRCDIR	= @top_srcdir@
OBJDIR	= @top_objdir@

prefix = @prefix@
exec_prefix = @exec_prefix@
release = @MACH_RELEASE_DIR@
include $(OBJDIR)/conf/Makeconf

##### End of configuration section #####

# Make these subdirectories first, and in this order,
# because other subdirectories depend on their object directories.
# XXX How to avoid descending into these subdirs twice?
SUBDIRS = include liblites server emulator bin


all:
	for subdir in $(SUBDIRS); do $(MAKE) -C $$subdir; if [ $$? -ne 0 ]; then exit 1; else true; fi; done

# Install all the targets from all the subdirectories.
install: install_subdirs 

install_subdirs:
	for subdir in $(SUBDIRS); do $(MAKE) -C $$subdir install; if [ $$? -ne 0 ]; then exit 1; else true; fi; done


clean:
	for subdir in $(SUBDIRS); do $(MAKE) -C $$subdir clean; done

distclean: clean
	rm -f Makefile config.status $(addsuffix /Makefile,$(SUBDIRS))

configure: $(SRCDIR)/conf/configure.in
	cd $(SRCDIR)/conf && autoconf

